<!DOCTYPE html>
<html>
<head>
<title>TopoMind Hawk Studio</title>
<link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
<style>
body { font-family: Consolas; background:#0f172a; color:white; padding:20px; }
textarea { width:100%; height:80px; background:#1e293b; color:white; }
button { margin-top:10px; padding:8px 15px; background:#2563eb; border:none; color:white; }
pre { background:#0b1220; padding:15px; }
.panel { margin-top:20px; }
</style>
</head>
<body>

<h2>Hawk Query</h2>
<textarea id="queryInput">Calculate sum of 1 to 5</textarea>
<button onclick="sendQuery()">Generate</button>

<div class="panel">
<h3>Generated Hawk DSL</h3>
<pre><code id="hawkCode"></code></pre>
</div>

<div class="panel">
<h3>Raw Response</h3>
<pre id="rawResponse"></pre>
</div>

<script>
const BASE_URL = "http://127.0.0.1:8000";

async function sendQuery() {
    const response = await fetch(BASE_URL + "/query", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ query: document.getElementById("queryInput").value })
    });

    const data = await response.json();
    document.getElementById("rawResponse").textContent =
        JSON.stringify(data, null, 2);

    if (data.status === "success" && data.output?.code) {
        document.getElementById("hawkCode").textContent =
            data.output.code;
        Prism.highlightAll();
    } else {
        document.getElementById("hawkCode").textContent = "";
    }
}
</script>

</body>
</html>
